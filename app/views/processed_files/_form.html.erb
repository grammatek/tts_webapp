<%= form_with model: processed_file do |form| %>

  <div>
    <div id="filedrop" class="dropzone dropzone-default dz-clickable" data-controller="dropzone" data-dropzone-max-file-size="2" data-dropzone-max-files="1">
    <%= form.file_field :text_file, direct_upload: true, data: { target: 'dropzone.input' } %>
      <div class="dropzone-msg dz-message needsclick text-gray-600">
        <h3 class="dropzone-msg-title">Dragðu skjal hingað eða smelltu til þess að hlaða upp skjali</h3>
        <span class="dropzone-msg-desc text-sm">Skjalið má ekki vera stærra en 10 KB. Veldu gerð textaskjals hér fyrir neðan (texti eða HTML)</span>
      </div>
    </div>
  </div>
  <div class="dropdown">
    <%= form.label "Gerð textaskjals" %>
    <%= form.select :text_type, ProcessedFile.text_types.keys, {}, class: "dropdown_select" %>
  </div>
  <div id="submit" class="submit">
    <%= form.submit 'Senda á talgervil', class: "btn btn--primary" %>
  </div>
  <script type="text/javascript">
      //import {Dropzone} from "dropzone";
      document.getElementById("submit").addEventListener("click", function(event) {
          import {Dropzone} from "dropzone";
          let my_dz = Dropzone.forElement("#filedrop");
          my_dz.removeAllFiles();
          console.log("This is my_dz: " + my_dz.toString());
          //my_dz.empty();
          //$('.dz-preview').empty();
          //$('.dz-message').show();
          //event.preventDefault();
       //   alert("hello!");
      });

      // JQuery - we don't have that ...
      /*
      $(function () {
          $("#submit").click(function (e) {
              $('.dz-preview').empty();
              $('.dz-message').show();
          });
      });*/
  </script>

<% end %>
